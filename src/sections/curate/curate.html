
<template class="task-template">
  <section id="curate-section" class="section js-section u-category-windows">

  <head>
      <title>SODA - Keep calm and curate</title>
      <!-- <link rel="import" href="sections/curate/organize_files.html"> -->
  </head>

<main class="dash-content main show" id="curate_main">
  <h5 class="dash-title" style="border-bottom:none;font-size:17px"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Curate
  </h5>
<!-- These are the main tab for each step -->
  <div class="form-tabs tab-active" id="curate-tab">
    <h3 class='question-title'>What would you like to <br> <span style="color: var(--color-bg-plum)">accomplish </span>today?
    </h3>
    <div class="div-organize-generate-dataset">
      <button class="button-generate-dataset" onclick="changeMainContent('curate_main', 'organize_main')">
        <i class="fas fa-sitemap" style="font-size: 50px;color:#258193"></i>
        <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">ORGANIZE DATASET</p>
        <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
      </button>
      <button class="button-generate-dataset" onclick="changeMainContent('curate_main', 'validate_main')">
        <i class="fas fa-clipboard-check" style="font-size: 50px;color: #258193"></i>
        <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">VALIDATE DATASET</p>
        <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
      </button>
    </div>
  </div>
  <div>
</div>
</main>

<main class="dash-content" id="organize_main" style="grid-template-rows:15% auto 5%">
  <div style="border-bottom:1px solid #f0f0f0">
    <h5 class="dash-title" style="color: #222c3c;border-bottom:none;font-size:17px;"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Organize dataset
      <!-- <div style="height:1px;width:220px;border:1px solid var(--color-bg-plum)"></div> -->
    </h5>
    <ul class="list-unstyled multi-steps" style="width:50%;margin-top:10px">
      <li class="progress-li is-current" onclick="onClickTabs('high-level-folders-tab', ['organize-dataset-tab', 'metadata-files-tab', 'generate-dataset-tab', 'generate-dataset-locally-tab', 'generate-dataset-blackfynn-tab'], this)"><strong>Specify folders</strong></li>
      <li class="progress-li"onclick="onClickTabs('organize-dataset-tab', ['high-level-folders-tab', 'metadata-files-tab', 'generate-dataset-tab', 'generate-dataset-locally-tab', 'generate-dataset-blackfynn-tab'], this)"><strong>Organize</strong></li>
      <li class="progress-li" onclick="onClickTabs('metadata-files-tab', ['organize-dataset-tab', 'high-level-folders-tab', 'generate-dataset-tab', 'generate-dataset-locally-tab', 'generate-dataset-blackfynn-tab'], this)"><strong>Metadata files</strong></li>
      <li class="progress-li" onclick="onClickTabs('generate-dataset-tab', ['organize-dataset-tab', 'metadata-files-tab', 'high-level-folders-tab', 'generate-dataset-locally-tab', 'generate-dataset-blackfynn-tab'], this)"><strong>Generate</strong></li>
    </ul>
  </div>

<!-- These are the main tab for each step -->

<!-- 1. Specify high Level folders -->
  <div class="sub-tabs tab-active" id="high-level-folders-tab" style="grid-template-rows:10% 90%;margin-top:20px;">
    <div class="container-body condensed" style="min-height:450px">
      <h5 class="question-title">Which <span style="color:var(--color-bg-plum)">SPARC high-level folders</span><br>
        would you like <span style="color:var(--color-bg-plum)">to add to your dataset?</span></h5>
      <div>
      <div class="first-three-high-level-folders">
        <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>code</h2>
          <div class="folder-checkbox" style="float:right">
            <input class="folder-input-check" id="code-check" type="checkbox">
            <label for="code-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>primary</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="primary-check" type="checkbox">
            <label for="primary-check"></label>
          </div>
        </div>
        <div class="card-body">
            <p>Identify and go through the suitable curation and sharing processes for your data type</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>source</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="source-check" type="checkbox">
            <label for="source-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
    </div>
    <div class="first-three-high-level-folders">
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>docs</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="docs-check" type="checkbox">
            <label for="docs-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>protocol</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="protocol-check" type="checkbox">
            <label for="protocol-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2 style="padding-left:15px"><i class="fas fa-folder"></i>derivatives</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="derivatives-check" type="checkbox">
            <label for="derivatives-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      </div>
    </div>
    </div>
  </div>


  <!-- 2. Organize dataset -->
  <div class="sub-tabs condensed" id="organize-dataset-tab" style="grid-template-rows: 10% 90%">
    <div style="padding: 20px 0;margin:3px 3px;" align="right">
      <button id="button-back" class="button-back" style="float:left;background-color: #fff;border-color:var(--color-bg-plum);color: var(--color-bg-plum);opacity: 0.8;height:30px;width:30px"><i class="fas fa-arrow-left fa-fw"></i></button>
      <input style="float:left;border-radius: 3px;margin-left: 15px;height: 30px; box-shadow: 0 0 2px #999;border: 1px solid var(--color-bg-plum); font-family: sans-serif;font-size: 14px;font-weight:500;color:#999999;width: 300px" id="input-global-path" value="/" readonly></input>
      <button type="button" id="new-folder" class="myButton second" style="width:37px;color:#fff;background:var(--color-bg-plum);opacity: 0.8;border: 1px solid var(--color-bg-plum)"><i class="fas fa-plus fa-fw"></i><b></b></button>
      <div class="btn-group" role="group">
        <button id="btnGroupDrop1" type="button" class="myButton" style="width:37px;color:var(--color-bg-plum);background:#fff;opacity: 0.8;border: 1px solid var(--color-bg-plum)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-arrow-up fa-fw"></i>
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="btnGroupDrop1">
          <a class="dropdown-item" id="add-files" href="#">Files</a>
          <a class="dropdown-item" id="add-folders" href="#">Folders</a>
        </div>
      </div>
      <div class="btn-group" role="group">
        <button id="button-details-organize" class="myButton" style="width: 37px;color:#fff;background:var(--color-bg-plum);opacity: 0.8;border: 1px solid var(--color-bg-plum)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-list"></i>
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="button-details-organize">
          <a class="dropdown-item" id="import-progress" href="#">Import progress</a>
          <a class="dropdown-item" id="save-progress" href="#">Save progress</a>
          <a class="dropdown-item" id="clear-progress" href="#">Reset progress</a>
          <a class="dropdown-item" id="show-details" href="#">Show details</a>
        </div>
      </div>
    </div>
    <div class="container-fluid" style="height:100%">
      <!-- These are the context menu options, will not appear on the UI until prompted -->
        <ul class="menu reg-folder off">
          <li id="folder-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="folder-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
        </ul>
        <ul class="menu high-level-folder off">
          <li id="folder-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="folder-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
          <li id="tooltip-folders"><i class="fas fa-info fa-fw"></i>Details</li>
        </ul>
        <ul class="menu file off">
          <li id="file-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="file-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
          <li id="file-description"><i class="far fa-plus-square fa-fw"></i>Details</li>
        </ul>
        <!-- <span class="hoverPath" style="display: none"></span> -->
        <span class="hoverFullName" style="display: none"></span>
      <!-- END -->
        <div id="items" class="div-organize-items" ondrop="drop(event);" ondragover="allowDrop(event);">
        </div>
        <div class="div-display-details file">
          <button class="button-display-details">X</button>
          <div>
            <label><b>Local path: <br></b></label>
            <p style="margin: 10px 0;" id="para-local-path-file"></p>
          </div>
          <div>
            <label><b>Description: </b></label>
            <textarea id="textarea-file-description" readonly></textarea>
            <input type="checkbox" style="color:#000;float:left"></input><label style="color:#000;float:left">Apply to all files in this folder</label>
            <!-- <button id="button-add-file-description" onclick="addDetailsForFile(this)" class="transition-btn" style="width:100px;margin:10px auto;height:30px;font-size:13px;padding:5px;">Confirm</button> -->
          </div>
          <div>
            <label><b>Additional metadata:</b></label>
            <textarea id="textarea-file-metadata" readonly></textarea>
            <input type="checkbox" style="color:#000;float:left"></input><label style="color:#000;float:left">Apply to all files in this folder</label>
          </div>
          <button id="button-add-file-metadata" onclick="addDetailsForFile(this)" class="transition-btn" style="width:100px;margin:10px auto;height:30px;font-size:13px;padding:5px;">Confirm</button>
      </div>
      <!-- <div class="div-display-details folders">
        <button class="button-display-details">X</button>

        <b>Local path: <br><p style="margin: 0 0;" id="para-local-path-folder"></p></b>
        <b>Other details: <br><p style="margin: 0 0;" id="para-other-details-folder"></p></b>

    </div> -->
    </div>
  </div>

<!-- 3. Metadata files -->
<div class="sub-tabs condensed" id="metadata-files-tab" style="grid-template-rows: 15% 85%;">
  <form>
    <div style = "padding:10px 0px;max-width:800px;min-width:450px;margin:0 auto" class="switch-field">
      <input class="input-switch metadata" id="submission-metadata-file" name="organize-add-metadata-files" type="radio" checked/>
      <label for="submission-metadata-file" class="label-switch metadata"> submission </label>
      <input class="input-switch metadata" id="ds-description-metadata-file" name="organize-add-metadata-files" type="radio" />
      <label for="ds-description-metadata-file" class="label-switch metadata" style="width:300px"> dataset description </label>
      <input class="input-switch metadata" id="subjects-metadata-file" name="organize-add-metadata-files" type="radio" />
      <label for="subjects-metadata-file" class="label-switch metadata"> samples </label>
      <input class="input-switch metadata" id="samples-metadata-file" name="organize-add-metadata-files" type="radio" />
      <label for="samples-metadata-file" class="label-switch metadata"> subjects </label>
      <input class="input-switch metadata" id="samples-metadata-file" name="organize-add-metadata-files" type="radio" />
      <label for="readme-metadata-file" class="label-switch metadata"> README </label>
      <input class="input-switch metadata" id="samples-metadata-file" name="organize-add-metadata-files" type="radio" />
      <label for="changes-metadata-file" class="label-switch metadata"> CHANGES </label>
    </div>
  </form>

  <div class="container-body">
    <h5 class="question-title">Import your <span style="color:var(--color-bg-plum)">metadata files</span><br>
      below <span style="color:var(--color-bg-plum)">to add to your dataset</span></h5>
      <div id="div-submission-metadata-file" class="div-metadata-import">
        <h5>submission (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
    </div>
  </div>
  <!-- 4. Generate dataset -->
  <div class="sub-tabs" id="generate-dataset-tab">
      <h3 class='question-title'>Where would you like to <br> <span style="color: var(--color-bg-plum)">generate your dataset?</span></h3>
      <div class="div-organize-generate-dataset">
        <button id="btn-generate-locally" class="button-generate-dataset" onclick="onClickTabs('generate-dataset-locally-tab', ['organize-dataset-tab', 'metadata-files-tab', 'generate-dataset-tab', 'high-level-folders-tab', 'generate-dataset-blackfynn-tab'], this)">
          <i class="fas fa-tv" style="font-size: 50px;color:#258193"></i>
          <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">LOCALLY ON MY COMPUTER</p>
          <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
        </button>
        <button id="btn-generate-BF" class="button-generate-dataset" onclick="onClickTabs('generate-dataset-blackfynn-tab', ['high-level-folders-tab','organize-dataset-tab', 'metadata-files-tab', 'generate-dataset-tab'], this)">
          <i class="fas fa-cloud-upload-alt" style="font-size: 50px;color: #258193"></i>
          <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">UPLOAD TO BLACKFYNN</p>
          <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
        </button>
      </div>
    </div>

    <!-- Generate locally -->
    <div class="sub-tabs" id="generate-dataset-locally-tab">
        <h3 class='question-title' style="padding: 35px;">Choose <span style="color: var(--color-bg-plum)">a local destination</span> for your dataset</h3>
        <div>
          <form style="line-height:2">
            <div class="form-row">
              <div class="form-group" style="line-height: 50px;display: flex !important;flex-direction:column">
                <label for="inputLocalDestination"><b style="color: var(--color-bg-plum)">Destination:</b></label>
                <input class="form-control" id="inputLocalDestination" type="text" readonly placeholder="Browse here">
                <!-- <input type="email"  id="inputEmail4" placeholder="Email"> -->
              </div>
            </div>
            <div class="form-row">
              <div class="form-group" style="line-height: 50px;display: flex !important;flex-direction:column">
                <label for="inputNewNameDataset"><b style="color: var(--color-bg-plum)">Dataset name:</b></label>
                <input type="text" class="form-control" style="background: #fff !important;" id="inputNewNameDataset" placeholder="Enter here">
              </div>
            </div>
          </form>
          <div class="alert alert-primary" style="margin-top:25px !important;display:none" id="para-organize-datasets-loading" role="alert"></div>
          <div class="alert alert-danger" style="margin-top:25px !important;display:none" id="para-organize-datasets-error" role="alert"></div>
          <div class="alert alert-success" style="margin-top:25px !important;display:none" id="para-organize-datasets-success" role="alert"></div>
          <br>
        </div>
      </div>

      <div id="generate-dataset-blackfynn-tab" class="sub-tabs" style="margin-top:20px;grid-template-rows: 10% auto">
        <h3 class='question-title' style="padding: 35px;">Choose <span style="color: var(--color-bg-plum)">a Blackfynn account and dataset</span> to upload your dataset</h3>
        <div id="div-create-cloud">
          <h5> </h5>
          <p></p>
          <h5> Select account </h5>
          <div class="demo-controls">
            <select id="bfuploadaccountlist" style="width:58%" class="my-dropdown">
              <option> Select </option>
            </select>
            <button id="button-upload-check-bf-account-details" class="demo-button"> Switch Account </button>
            <p id="para-account-details"></p>
          </div>
          <div id=div-bf-account-load-progress-curate class="progressdiv">
            <div class="indeterminatebar"></div>
          </div>
          <p id='para-upload-select-account-status'> <p>
          <h5> Select Blackfynn dataset for uploading
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Select the target dataset on your Blackfynn account (sorted alphabetically).
              <br> <br>
              Note: You must have "owner", "manager" or "editor" permissions on the dataset to upload. See feature "Manage dataset permissions" of SODA and our associated <a href="https://github.com/bvhpatel/SODA/wiki/Manage-dataset-permissions" style="color:white;"> documentation</a> for more information.
            </div>
          </h5>
          <div class="demo-controls" style="margin-top: 15px">
            <select class="my-dropdown" id="bfuploaddatasetlist" style="width:80%">
              <option> Select dataset </option>
            </select>
            <p></p>
            <button id="button-upload-refresh-dataset-list" class="demo-button" style="display:none"> Refresh List </button>
          </div>
          <p> </p>
          <div id="div-curate-button" class="datasetsaveoption">
            <h5> Proceed </h5>
            <button id="button-curate-dataset" class="demo-button"> Generate </button>
            <p id="para-please-wait-curate"</p>
            </div>
            <div id="div-curate-progress-bar-error-status" class="datasetsaveoption">
              <p id='para-curate-progress-bar-error-status'> <p>
            </div>
            <div id="div-curate-progress">
              <div id="div-curate-meter-progress" class="datasetsaveoption">
                <h5> Progress </h5>
                <progress class=progresstrack id="progress-bar-curate" max="100" value="0"></progress>
              </div>
              <div id="div-curate-progress-bar-status" class="datasetsaveoption">
                <p id='para-curate-progress-bar-status'> <p>
              </div>
            </div>
          </div>
      </div>


  <div>
    <button type="button" onclick="nextPrev(-1)" id="prevBtn" class="transition-btn" style="display:none">Previous</button>
    <button style="float:right" onclick="nextPrev(1)" id="nextBtn" type="button" class="transition-btn">Next</button>
  </div>
</main>

<main class="dash-content main" id="validate_main">
  <h5 class="dash-title" style="border-bottom:none;font-size:17px"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Validate dataset</h5>
   <div class="form-tabs tab-active"id="validate-tab">
     <h3 class="question-title">Upload <span style="color:var(--color-bg-plum)">your dataset</span>
       <br> below to <span style="color:var(--color-bg-plum)">validate</span></h3>
       <div class = "div-organize-generate-dataset">
         <li class="folder-upload-div">
           <p>Upload dataset</p>
           <div><i style="font-size: 60px" class="fas fa-cloud-upload-alt"></i></div>
           <p style="font-size:11px">Drag and drop your <br>
             folder here</p> <p style="font-size:12px">OR</p>
             <button>Choose folder</button>
         </li>
        </div>
       </div>

 <div>
   <button type="button" class="transition-btn">Previous</button>
   <button style="float:right" type="button" class="transition-btn">Next</button>
 </div>
</main>

 <script>window.$ = window.jQuery = require('jquery')</script>
 <script src="../src/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
 <script src="../src/node_modules/bootbox/dist/bootbox.min.js"></script>

 <script src="../src/scripts/tab-effects.js"></script>


 <script>
   $('.button-display-details').click(function() {
     $(this).parent().toggleClass('show')
   })
   </script>

</section>
</template>
