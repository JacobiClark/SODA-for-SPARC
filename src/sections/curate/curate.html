
<template class="task-template">
  <section id="curate-section" class="section js-section u-category-windows">

  <head>
      <title>SODA - Keep calm and curate</title>
      <!-- <link rel="import" href="sections/curate/organize_files.html"> -->
  </head>

<main class="dash-content main show" id="curate_main">
  <h5 class="dash-title" style="border-bottom:none;font-size:17px"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Curate
  </h5>
<!-- These are the main tab for each step -->
  <div class="form-tabs tab-active" id="curate-tab">
    <h3 class='question-title'>What would you like to <br> <span style="color: var(--color-bg-plum)">accomplish </span>today?
    </h3>
    <div class="div-organize-generate-dataset">
      <button class="button-generate-dataset" onclick="changeMainContent('curate_main', 'organize_main')">
        <i class="fas fa-sitemap" style="font-size: 50px;color:#258193"></i>
        <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">ORGANIZE DATASET</p>
        <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
      </button>
      <button class="button-generate-dataset" onclick="changeMainContent('curate_main', 'validate_main')">
        <i class="fas fa-clipboard-check" style="font-size: 50px;color: #258193"></i>
        <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">VALIDATE DATASET</p>
        <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
      </button>
    </div>
  </div>
  <div>
</div>
</main>

<main class="dash-content" id="organize_main" style="grid-template-rows:15% auto 5%">
  <div style="border-bottom:1px solid #f0f0f0">
    <h5 class="dash-title" style="color: #222c3c;border-bottom:none;font-size:17px;"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Organize dataset
      <!-- <div style="height:1px;width:220px;border:1px solid var(--color-bg-plum)"></div> -->
    </h5>
    <ul class="list-unstyled multi-steps" style="width:60%;margin-top:10px">
      <li class="progress-li is-current" onclick="showParentTab(0)"><strong>Getting started</strong></li>
      <li class="progress-li" onclick="showParentTab(1)"><strong>Specify folders</strong></li>
      <li class="progress-li" onclick="showParentTab(2)"><strong>Organize</strong></li>
      <li class="progress-li" onclick="showParentTab(3)"><strong>Metadata files</strong></li>
      <li class="progress-li" onclick="showParentTab(4)"><strong>Generate</strong></li>
    </ul>
  </div>

<!-- These are the main tab for each step -->

<!-- 1. Getting started tab -->
<div class="parent-tabs condensed" id="getting-started-tab" style="grid-template-rows: 10% 90%">
  This is the getting started tab
</div>

<!-- 2. Specify high Level folders -->
  <div class="parent-tabs" id="high-level-folders-tab" style="grid-template-rows:10% 90%;margin-top:20px;">
    <div class="container-body condensed" style="min-height:450px">
      <h5 class="question-title">Which <span style="color:var(--color-bg-plum)">SPARC high-level folders</span><br>
        would you like <span style="color:var(--color-bg-plum)">to add to your dataset?</span></h5>
      <div>
      <div class="first-three-high-level-folders">
        <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>code</h2>
          <div class="folder-checkbox" style="float:right">
            <input class="folder-input-check" id="code-check" type="checkbox">
            <label for="code-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>primary</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="primary-check" type="checkbox">
            <label for="primary-check"></label>
          </div>
        </div>
        <div class="card-body">
            <p>Identify and go through the suitable curation and sharing processes for your data type</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>source</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="source-check" type="checkbox">
            <label for="source-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
    </div>
    <div class="first-three-high-level-folders">
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>docs</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="docs-check" type="checkbox">
            <label for="docs-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2><i class="fas fa-folder"></i>protocol</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="protocol-check" type="checkbox">
            <label for="protocol-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      <div class="option-card">
        <div class="card-head">
          <h2 style="padding-left:15px"><i class="fas fa-folder"></i>derivative</h2>
          <div class="folder-checkbox">
            <input class="folder-input-check" id="derivative-check" type="checkbox">
            <label for="derivatives-check"></label>
          </div>
        </div>
        <div class="card-body">
          <p>Accomplish only the desired curation and sharing steps of your choice</p>
        </div>
      </div>
      </div>
    </div>
    </div>
  </div>

<!-- This is the loading div (Creating your SPARC folders...) -->
  <!-- <div class="loading-tabs" id="div-loading-tab" style="display:block">
    <div class="spinner-border text-success" role="status">
      <span id="loading-status" class="sr-only"></span>
    </div>
  </div> -->


  <!-- 3. Organize dataset -->
  <div class="parent-tabs condensed" id="organize-dataset-tab" style="grid-template-rows: 10% 90%">
    <div style="padding: 20px 0;margin:3px 3px;" align="right">
      <button id="button-back" class="button-back" style="float:left;background-color: #fff;border-color:var(--color-bg-plum);color: var(--color-bg-plum);opacity: 0.8;height:30px;width:30px"><i class="fas fa-arrow-left fa-fw"></i></button>
      <input style="float:left;border-radius: 3px;margin-left: 15px;height: 30px; box-shadow: 0 0 2px #999;border: 1px solid var(--color-bg-plum); font-family: sans-serif;font-size: 14px;font-weight:500;color:#999999;width: 300px" id="input-global-path" value="/" readonly></input>
      <div class="btn-group" role="group">
        <button id="btnGroupDrop1" type="button" class="myButton" style="width: 90px;color:#fff;background:var(--color-bg-plum);border: 1px solid var(--color-bg-plum)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-arrow-up fa-fw" style="margin-right:5px"></i>New
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="btnGroupDrop1">
          <a class="dropdown-item" id="new-folder" href="#"><i class="fas fa-folder-plus" style="margin-right:5px"></i>New folder</a>
          <a class="dropdown-item" id="add-files" href="#"><i class="fas fa-upload" style="margin-right:5px"></i>Import files</a>
          <a class="dropdown-item" id="add-folders" href="#"><i class="fas fa-upload" style="margin-right:5px"></i>Import folders</a>
        </div>
      </div>
      <div class="btn-group" role="group">
        <button id="button-details-organize" class="myButton" style="width: 90px;color:var(--color-bg-plum);background:#fff;border: 1px solid var(--color-bg-plum)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-list" style="margin-right:7px"></i>More
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="button-details-organize">
          <a class="dropdown-item" id="import-progress" href="#">Import progress</a>
          <a class="dropdown-item" id="save-progress" href="#">Save progress</a>
          <a class="dropdown-item" id="clear-progress" href="#">Reset progress</a>
          <a class="dropdown-item" id="show-details" href="#">Show details</a>
        </div>
      </div>
    </div>
    <div class="container-fluid" style="height:100%">
      <!-- These are the context menu options, will not appear on the UI until prompted -->
        <ul class="menu reg-folder off">
          <li id="folder-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="folder-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
        </ul>
        <ul class="menu high-level-folder off">
          <li id="folder-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="folder-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
          <li id="tooltip-folders"><i class="fas fa-info fa-fw"></i>Details</li>
        </ul>
        <ul class="menu file off">
          <li id="file-delete"><i class="far fa-trash-alt fa-fw"></i>Delete</li>
          <li id="file-rename"><i class="fas fa-edit fa-fw"></i>Rename</li>
          <li id="file-description"><i class="far fa-plus-square fa-fw"></i>Details</li>
        </ul>
        <!-- <span class="hoverPath" style="display: none"></span> -->
        <span class="hoverFullName" style="display: none"></span>
      <!-- END -->
        <div id="items" class="div-organize-items" ondrop="drop(event);" ondragover="allowDrop(event);">
        </div>
        <div class="div-display-details file">
          <button class="button-display-details">X</button>
          <div>
            <label><b>Local path: <br></b></label>
            <p style="margin: 10px 0;" id="para-local-path-file"></p>
          </div>
          <div>
            <label><b>Description: </b></label>
            <textarea id="textarea-file-description"></textarea>
            <input id="input-add-file-description" type="checkbox" style="color:#000;float:left"></input><label style="color:#000;float:left">Apply to all files in this folder</label>
          </div>
          <div>
            <label><b>Additional metadata:</b></label>
            <textarea id="textarea-file-metadata"></textarea>
            <input  id="input-add-file-metadata" type="checkbox" style="color:#000;float:left"></input><label style="color:#000;float:left">Apply to all files in this folder</label>
          </div>
          <button onclick="addDetailsForFile(this)" class="transition-btn" style="width:100px;margin:10px auto;height:30px;font-size:13px;padding:5px;">Confirm</button>
      </div>
      <!-- <div class="div-display-details folders">
        <button class="button-display-details">X</button>

        <b>Local path: <br><p style="margin: 0 0;" id="para-local-path-folder"></p></b>
        <b>Other details: <br><p style="margin: 0 0;" id="para-other-details-folder"></p></b>

    </div> -->
    </div>
  </div>

<!-- 4. Metadata files -->
<div class="parent-tabs condensed" id="metadata-files-tab" style="grid-template-rows: 15% 85%;">
  <form>
    <div style = "padding:10px 0px;max-width:800px;min-width:450px;margin:0 auto" class="switch-field">
      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-submission-metadata-file" type="radio" checked/>
      <label for="submission-metadata-file" onclick="showSubTab('metadata', 'div-submission-metadata-file', 'input-submission-metadata-file')" class="label-switch metadata"> submission </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-dataset-description-metadata-file" type="radio" />
      <label for="ds-description-metadata-file" onclick="showSubTab('metadata', 'div-dataset-description-metadata-file', 'input-dataset-description-metadata-file')" class="label-switch metadata" style="width:300px"> dataset description </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-samples-metadata-file" type="radio" />
      <label for="subjects-metadata-file" onclick="showSubTab('metadata', 'div-samples-metadata-file', 'input-samples-metadata-file')" class="label-switch metadata"> samples </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-subjects-metadata-file" type="radio" />
      <label for="samples-metadata-file"  onclick="showSubTab('metadata', 'div-subjects-metadata-file', 'input-subjects-metadata-file')" class="label-switch metadata"> subjects </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-readme-metadata-file" type="radio" />
      <label for="readme-metadata-file" onclick="showSubTab('metadata', 'div-readme-metadata-file', 'input-readme-metadata-file')" class="label-switch metadata"> README </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-changes-metadata-file" type="radio" />
      <label for="changes-metadata-file" onclick="showSubTab('metadata', 'div-changes-metadata-file', 'input-changes-metadata-file')" class="label-switch metadata"> CHANGES </label>

      <input class="input-switch metadata" name="organize-add-metadata-files" id="input-manifest-metadata-file" type="radio" />
      <label for="manifest-metadata-file" onclick="showSubTab('metadata', 'div-manifest-metadata-file', 'input-manifest-metadata-file')" class="label-switch metadata"> manifest </label>
    </div>
  </form>

  <div class="container-body">
    <h5 class="question-title">Import your <span style="color:var(--color-bg-plum)">metadata files</span><br>
      below <span style="color:var(--color-bg-plum)">to add to your dataset</span></h5>
      <div id="div-submission-metadata-file" style="display: block;" class="div-metadata-import">
        <h5>submission (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-dataset-description-metadata-file" class="div-metadata-import">
        <h5>dataset description (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-subjects-metadata-file" class="div-metadata-import">
        <h5>subjects (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-samples-metadata-file" class="div-metadata-import">
        <h5>samples (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-readme-metadata-file" class="div-metadata-import">
        <h5>README (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-changes-metadata-file" class="div-metadata-import">
        <h5>CHANGES (.csv, .xlsx, .json)</h5>
        <div class="div-file-import" id="submission">
          <p style="font-weight:bold">Import <br>existing file</p>
          <div><i style="font-size: 70px;color:var(--tagify-dd-color-primary)" class="fas fa-cloud-upload-alt"></i></div>
          <p style="font-size:13px;margin-top:10px;margin-bottom:5px">Drag and drop your <br>
            file here OR</p>
            <button class="div-file-import-button">Choose file</button>
        </div>
      </div>
      <div id="div-manifest-metadata-file" class="div-metadata-import">
        <h5>manifest (.csv, .xlsx, .json)</h5>
        <div class="demo-controls">
          <label class="switch">
            <input id="generate-manifest" name="manifest" type="checkbox" class="with-style-manifest" onclick="updateManifestLabelColor(this)"/>
            <span class="slider round"></span>
          </label>
          <label id="label-manifest" class="labelradio-manifest" style="padding-left:10px"> Include auto-generated manifest files
          </label>
        </div>
      </div>
    </div>
  </div>
  <!-- 5. Generate dataset -->
  <div class="parent-tabs" id="generate-dataset-tab">
      <h3 class='question-title'>Where would you like to <br> <span style="color: var(--color-bg-plum)">generate your dataset?</span></h3>
      <div class="div-organize-generate-dataset">
        <button class="button-generate-dataset" onclick="showSubTab('generate-dataset-locally-tab')">
          <i class="fas fa-tv" style="font-size: 50px;color:#258193"></i>
          <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">LOCALLY ON MY COMPUTER</p>
          <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
        </button>
        <button class="button-generate-dataset" onclick="showSubTab('generate-dataset-blackfynn-tab')">
          <i class="fas fa-cloud-upload-alt" style="font-size: 50px;color: #258193"></i>
          <p style="margin-top:30px;font-family:'Montserrat', sans-serif;">UPLOAD TO BLACKFYNN</p>
          <i class="fas fa-arrow-right" style="font-size: 20px;color: #258193;"></i>
        </button>
      </div>
    </div>

    <!-- Generate locally -->
    <div class="sub-tabs" id="generate-dataset-locally-tab">
        <h3 class='question-title' style="padding: 35px;">Choose <span style="color: var(--color-bg-plum)">a local destination</span> for your dataset</h3>
        <div>
          <form style="line-height:2">
            <div class="form-row">
              <div class="form-group" style="line-height: 50px;display: flex !important;flex-direction:column">
                <label for="inputLocalDestination"><b style="color: var(--color-bg-plum)">Destination:</b></label>
                <input class="form-control" id="inputLocalDestination" type="text" readonly placeholder="Browse here">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group" style="line-height: 50px;display: flex !important;flex-direction:column">
                <label for="inputNewNameDataset"><b style="color: var(--color-bg-plum)">Dataset name:</b></label>
                <input type="text" class="form-control" style="background: #fff !important;" id="inputNewNameDataset" placeholder="Enter here">
              </div>
            </div>
          </form>
          <div class="alert alert-primary" style="margin-top:25px !important;display:none" id="para-organize-datasets-loading" role="alert"></div>
          <div class="alert alert-danger" style="margin-top:25px !important;display:none" id="para-organize-datasets-error" role="alert"></div>
          <div class="alert alert-success" style="margin-top:25px !important;display:none" id="para-organize-datasets-success" role="alert"></div>
          <br>
        </div>
      </div>

      <div id="generate-dataset-blackfynn-tab" class="sub-tabs" style="margin-top:20px;grid-template-rows: 10% auto">
        <h3 class='question-title' style="padding: 35px;">Choose <span style="color: var(--color-bg-plum)">a Blackfynn account and dataset</span> to upload your dataset</h3>
        <div id="div-create-cloud">
          <h5> </h5>
          <p></p>
          <h5> Select account </h5>
          <div class="demo-controls">
            <select id="bfuploadaccountlist" style="width:58%" class="my-dropdown">
              <option> Select </option>
            </select>
            <button id="button-upload-check-bf-account-details" class="demo-button"> Switch Account </button>
            <p id="para-account-details"></p>
          </div>
          <div id=div-bf-account-load-progress-curate class="progressdiv">
            <div class="indeterminatebar"></div>
          </div>
          <p id='para-upload-select-account-status'> <p>
          <h5> Select Blackfynn dataset for uploading
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Select the target dataset on your Blackfynn account (sorted alphabetically).
              <br> <br>
              Note: You must have "owner", "manager" or "editor" permissions on the dataset to upload. See feature "Manage dataset permissions" of SODA and our associated <a href="https://github.com/bvhpatel/SODA/wiki/Manage-dataset-permissions" style="color:white;"> documentation</a> for more information.
            </div>
          </h5>
          <div class="demo-controls" style="margin-top: 15px">
            <select class="my-dropdown" id="bfuploaddatasetlist" style="width:80%">
              <option> Select dataset </option>
            </select>
            <p></p>
            <button id="button-upload-refresh-dataset-list" class="demo-button" style="display:none"> Refresh List </button>
          </div>
          <p> </p>
          <div id="div-curate-button" class="datasetsaveoption">
            <h5> Proceed </h5>
            <button id="button-curate-dataset" class="demo-button"> Generate </button>
            <p id="para-please-wait-curate"</p>
            </div>
            <div id="div-curate-progress-bar-error-status" class="datasetsaveoption">
              <p id='para-curate-progress-bar-error-status'> <p>
            </div>
            <div id="div-curate-progress">
              <div id="div-curate-meter-progress" class="datasetsaveoption">
                <h5> Progress </h5>
                <progress class=progresstrack id="progress-bar-curate" max="100" value="0"></progress>
              </div>
              <div id="div-curate-progress-bar-status" class="datasetsaveoption">
                <p id='para-curate-progress-bar-status'> <p>
              </div>
            </div>
          </div>
      </div>


  <div>
    <button type="button" onclick="nextPrev(-1)" id="prevBtn" class="transition-btn" style="display:none">Previous</button>
    <button style="float:right" onclick="nextPrev(1)" id="nextBtn" type="button" class="transition-btn">Next</button>
  </div>
</main>

<main class="dash-content main" id="validate_main">
  <h5 class="dash-title" style="border-bottom:none;font-size:17px"><i class="fas fa-chevron-right" style="margin-right:10px"></i>Validate dataset</h5>
   <div class="form-tabs tab-active"id="validate-tab">
     <h3 class="question-title">Upload <span style="color:var(--color-bg-plum)">your dataset</span>
       <br> below to <span style="color:var(--color-bg-plum)">validate</span></h3>
       <div class = "div-organize-generate-dataset">
         <li class="folder-upload-div">
           <p>Upload dataset</p>
           <div><i style="font-size: 60px" class="fas fa-cloud-upload-alt"></i></div>
           <p style="font-size:11px">Drag and drop your <br>
             folder here</p> <p style="font-size:12px">OR</p>
             <button>Choose folder</button>
         </li>
        </div>
       </div>

 <div>
   <button type="button" class="transition-btn">Previous</button>
   <button style="float:right" type="button" class="transition-btn">Next</button>
 </div>
</main>

 <script>window.$ = window.jQuery = require('jquery')</script>
 <script src="../src/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
 <script src="../src/node_modules/bootbox/dist/bootbox.min.js"></script>

 <script src="../src/scripts/tab-effects.js"></script>


 <script>
   $('.button-display-details').click(function() {
     $(this).parent().toggleClass('show')
   })
   </script>

</section>
</template>
