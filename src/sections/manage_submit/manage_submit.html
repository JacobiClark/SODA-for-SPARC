<!DOCTYPE html>
<template class="task-template">
  <section id="manage_submit-section" class="section js-section u-category-windows">
    <header class="section-header">
      <div class="section-wrapper">
        <h1>
          <img class="section-icon" src="assets/img/manage-teal.png">
          Manage Datasets
        </h1>
        <h3>This interface will assist you in managing and submitting your datasets on Blackfynn. It will also guide you for annotating your datasets using the Blackfynn model properties.</h3>
      </div>
    </header>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-login-demo-toggle" class="js-container-target demo-toggle-button">Login to your Blackfynn account
          <div class="demo-meta u-avoid-clicks"> Easy login interface </div>
        </button>

        <div class="demo-box">
          <p> Please checkout the dedicated <a href="https://help.blackfynn.com/articles/1488536-creating-an-api-key-for-the-blackfynn-clients"> Blackfynn Help </a>
          for generating an API and setting up your Blackfynn account on your computer for the first time. </p>

          <form id = 'blackfynn-account'>
            <div style = "padding:10px 0px">
              <input id="addAccount" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addAccount" class="labelradio"> Add new account </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Authenticate yourself by using API key and secret</span>
                </div>
            </div>
            <div>
              <input id="selectAccount" name="blackfynn-account" type="radio" class="with-style" />
              <label for="selectAccount" class="labelradio"> Select account </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Added account(s) will be displayed in this drop-down list. Click on 'Load existing account(s)' and select one from the drop-down list before continuing
                  </span>
                </div>
            </div>
          </form>

          <div id="div-add-account" class="datasetsaveoption">
            <h5> Add new account </h5>
            <div> <font color="black"> Api key name: </font> </div>
            <div class="demo-controls">
              <input id="bf-key-name" class="demo-response">
            </div>
            <div> <font color="black"> Api key: </font> </div>
            <div class="demo-controls">
              <input id="bf-key" class="demo-response">
            </div>
            <div> <font color="black"> Api secret: </font> </div>
            <div class="demo-controls">
              <input id="bf-secret" class="demo-response">
            </div>
            <h5> </h5>
            <div class="demo-controls">
              <button class="demo-button" id="add-bf-account"> Add account </button>
              <!-- <textarea class="demo-response" id="add-account-progress" readonly></textarea> -->
            </div>
            <p id="para-add-account-status"></p>
          </div>

          <div id="div-select-account" class="datasetsaveoption"><br>
            <button id="button-check-bf-account-details" class="demo-button"> Load existing account(s) </button>
            <h5> Select account </h5>
            <div class="demo-controls">
              <select class="my_dropdown" id="bfaccountlist">
                <option> Select </option>
              </select>
            </div>
            <div id=div-bf-account-load-progress class="progressdiv">
              <div class="indeterminatebar"></div>
            </div>
            <p id='para-select-account-status'> <p>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-create-demo-toggle" class="js-container-target demo-toggle-button"> Create new empty dataset
          <div class="demo-meta u-avoid-clicks"> Add an empty dataset on the selected Blackfynn account </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <h5> Enter name
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Enter the name of the Dataset you want to create</span>
            </div>
          </h5>
          <div class="demo-controls">
            <input id="bf-new-dataset-name" class="demo-response"> </input>
          </div>

          <h5> Enter subtitle (short description of less than 256 characters)
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Add a short description that explains what is in your dataset.
              <br> <br>
              It could also be added later under the "Add medatata to Blackfynn dataset" feature</span>
            </div>
          </h5>
          <div class="demo-controls">
            <textarea id="bf-new-dataset-subtitle" class="demo-response" rows="4" maxlength="256"> </textarea>
          </div>

          <h5> </h5>
          <div class="demo-controls">
            <button id="button-create-bf-new-dataset" class="demo-button"> Create </button>
            <p id='para-add-new-dataset-status' style="margin-top:-5px"></p>
          </div>
        </div>
      </div>
    </div>


    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-metadata-demo-toggle" class="js-container-target demo-toggle-button"> Add metadata to Blackfynn dataset
          <div class="demo-meta u-avoid-clicks"> Add subtitle, description, banner image, and license to your dataset
          </div>
        </button>
        <div class="demo-box">
          <p> Coming soon... tentative date: December 2019 </p>

          <h5> Select Blackfynn Dataset
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Select the Blackfynn dataset you wish to add/edit metadata (sorted alphabetically)</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bfdatasetlist_metadata">
              <option> Select dataset </option>
            </select>
          </div>
          <h5></h5>
          <div class="demo-controls">
            <button id="button-refresh-dataset-list-metadata" class="demo-button"> Refresh list </button>
          </div>

          <h5> </h5>
          <div id=div-bf-current-metadata-progress class="progressdiv">
            <div class="indeterminatebar"></div>
          </div>

          <form id = 'blackfynn-add-metadata'>
            <div style = "padding:10px 0px">
              <input id="addEditSubtitle" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addEditSubtitle" class="labelradio"> Add/edit subtitle </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Add a short description that explains what is in your dataset.</span>
                </div>
            </div>

            <div style = "padding:10px 0px">
              <input id="addEditDescription" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addEditDescription" class="labelradio"> Add/edit description </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Provide a detailed description of your dataset.
                  <br>
                  This description will be highly visible once your dataset is published
                  </span>
                </div>
            </div>

            <div style = "padding:10px 0px">
              <input id="addEditBanner" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addEditBanner" class="labelradio"> Add/edit a banner image </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">This image will be associated with the dataset.
                  <br>
                  It will be visisble once the dataset is published.
                  </span>
                </div>
            </div>

            <div style = "padding:10px 0px">
              <input id="addEditLicense" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addEditLicense" class="labelradio"> Choose/change a license </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">View and/or add a license that you want to associate with the dataset once it is published.
                  </span>
                </div>
            </div>
          </form>

          <div id="div-add-edit-subtitle" class="datasetsaveoption">
            <h5> View/type subtitle
            </h5>
            <div class="demo-controls">
              <textarea id="bf-dataset-subtitle" class="demo-response" rows="4" maxlength="256"> </textarea>
            </div>
            <h5> </h5>
            <div class="demo-controls">
              <button id="button-add-subtitle" class="demo-button"> Add subtitle </button>
              <p id = "para-dataset-subtitle-status"> </p>
            </div>
          </div>

          <div id="div-add-edit-description" class="datasetsaveoption">
              <h5>
              </h5>
          </div>

          <div id="div-add-edit-banner" class="datasetsaveoption">
              <h5>
              </h5>
          </div>

          <div id="div-add-edit-license" class="datasetsaveoption">
            <h5> Current License </h5>
            <div class="demo-controls">
              <p id = "para-dataset-license-current"> </p>
            </div>

            <h5> Change license </h5>
            <div class="demo-controls">
              <select class="my_dropdown" id="bf-license-list">
                <option> Select license </option>
                <optgroup label="Better for data">
                <option>Community Data License Agreement – Permissive </option>
                <option>Community Data License Agreement – Sharing </option>
                <option>Creative Commons Zero 1.0 Universal </option>
                <option>Creative Commons Attribution </option>
                <option>Creative Commons Attribution - ShareAlike </option>
                <option>Open Data Commons Open Database </option>
                <option>Open Data Commons Attribution </option>
                <option>Open Data Commons Public Domain Dedication and License </option>
                <optgroup label="Better for code">
                <option>Apache 2.0 </option>
                <option>GNU General Public License v3.0 </option>
                <option>GNU Lesser General Public License </option>
                <option>MIT </option>
                <option>Mozilla Public License 2.0 </option>
              </select>
            </div>

            <h5>  </h5>
            <div class="demo-controls">
              <button id="button-add-license" class="demo-button"> Add license </button>
              <p id = "para-dataset-license-status"> </p>
            </div>

          </div>

        </div>

      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-permission-demo-toggle" class="js-container-target demo-toggle-button"> Manage dataset permissions
          <div class="demo-meta u-avoid-clicks"> Make PI owner, share with the Curation Team for review, give access to other members for collaborating  </div>
        </button>
        <div class="demo-box">
          <h5> Select Blackfynn Dataset
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Select the Blackfynn dataset you wish to see/edit permission (sorted alphabetically)</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bfdatasetlist_permission">
              <option> Select dataset </option>
            </select>
          </div>
          <h5></h5>
          <div class="demo-controls">
            <button id="button-refresh-dataset-list-permission" class="demo-button"> Refresh list </button>
          </div>
          <h5> Current permission
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Name of user (First name, Last name) and their current permission ('owner', 'viewer', 'manager', or 'editor') will be shown here for the selected dataset</span>
            </div>
          </h5>
          <div id=div-bf-current-permission-progress class="progressdiv">
            <div class="indeterminatebar"></div>
          </div>
          <div class="demo-controls">
            <p id = "para-dataset-permission-current"> </p>
          </div>


          <form id = 'blackfynn-permission-sharing'>
            <div style = "padding:10px 0px">
              <input id="pi-owner" name="blackfynn-permission-sharing" type="radio" class="with-style" />
              <label for="pi-owner" class="labelradio"> Make grant PI owner of the dataset </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Select name of the PI and click on 'Make PI owner'
                  <br> <br>
                  Note: SPARC curation rules require to have the PI of the SPARC award as the owner of a dataset before it is shared with the Curation Team</span>
                </div>
            </div>
            <div style = "padding:10px 0px">
              <input id="curation-team" name="blackfynn-permission-sharing" type="radio" class="with-style" />
              <label for="curation-team" class="labelradio"> Share with Curation Team </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">This button will give "manager" role to the SPARC Curation Team giving them access for reviewing your dataset'
                  </span>
                </div>
            </div>
            <div style = "padding:10px 0px">
              <input id="user-permission" name="blackfynn-permission-sharing" type="radio" class="with-style" />
              <label for="user-permission" class="labelradio"> Add/edit permission for a user (optional) </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Select name of user and the role you want to give for the selected dataset and click on 'Add permission for user'
                  </span>
                </div>
            </div>
            <div style = "padding:10px 0px">
              <input id="team-permission" name="blackfynn-permission-sharing" type="radio" class="with-style" />
              <label for="team-permission" class="labelradio"> Add/edit permission for a team (optional) </label>
                <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                  <span class="tooltiptext">Select name of team and the role you want to give for the selected dataset and click on 'Add permission for team'
                  </span>
                </div>
            </div>
          </form>

          <div id="div-bf-pi-owner" class="datasetsaveoption">
              <h5>
              </h5>
              <div class="demo-controls">
                <select class="my_dropdown" id="bf_list_users_pi">
                  <option> Select PI </option>
                </select>
              </div>

              <h5>  </h5>
              <div class="demo-controls">
                <button id="button-add-permission-pi" class="demo-button"> Make PI owner </button>
                <p id = "para-dataset-permission-status-pi"> </p>
              </div>
          </div>

          <div id="div-bf-share-curation-team" class="datasetsaveoption">
              <h5>
              </h5>
              <h5>  </h5>
              <div class="demo-controls">
                <button id="button-add-permission-curation-team" class="demo-button"> Share with Curation Team </button>
                <p id = "para-dataset-permission-status-curation-team"> </p>
              </div>
          </div>

          <div id="div-bf-user-permission" class="datasetsaveoption">
              <h5>
              </h5>
              <div class="demo-controls">
                <select class="my_dropdown" id="bf_list_users">
                  <option> Select user </option>
                </select>
              </div>

              <h5>  </h5>
              <div class="demo-controls">
                <select class="my_dropdown" id="bf_list_roles">
                  <option> Select role </option>
                  <option> viewer </option>
                  <option> manager </option>
                  <option> editor </option>
                  <option> owner </option>
                  <option> remove current permission </option>
                </select>
              </div>

              <h5>  </h5>
              <div class="demo-controls">
                <button id="button-add-permission" class="demo-button"> Add permission for user </button>
                <p id = "para-dataset-permission-status"> </p>
              </div>
          </div>

          <div id="div-bf-team-permission" class="datasetsaveoption">
            <h5>
            </h5>
            <div class="demo-controls">
              <select class="my_dropdown" id="bf_list_teams">
                <option> Select team </option>
              </select>
            </div>

            <h5>  </h5>
            <div class="demo-controls">
              <select class="my_dropdown" id="bf_list_roles_team">
                <option> Select role </option>
                <option> viewer </option>
                <option> manager </option>
                <option> editor </option>
                <option> remove current permission </option>
              </select>
            </div>

            <h5>  </h5>
            <div class="demo-controls">
              <button id="button-add-permission-team" class="demo-button"> Add permission for team </button>
              <p id = "para-dataset-permission-status-team"> </p>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-annotate-demo-toggle" class="js-container-target demo-toggle-button"> Annotate dataset
          <div class="demo-meta u-avoid-clicks"> Inform the model properties for your dataset </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <p> Coming soon... Tentative date: April 2020</p>

        </div>
      </div>
    </div>



    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-submit-demo-toggle" class="js-container-target demo-toggle-button"> Upload local dataset
          <div class="demo-meta u-avoid-clicks"> Upload a locally stored dataset to your Blackfynn account </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <h5> Select local dataset to submit
          <div class="tooltipnew"><img class="info" src="assets/img/info.png">
            <span class="tooltiptext">Select the local folder that you want to submit to your Blackfynn account</span>
          </div>
          </h5>
          <div class="demo-controls">
            <button id="button-select-submit-dataset" class="demo-button">Select Dataset Folder </button>
            <textarea class="demo-response" id="selected-submit-dataset"></textarea>
          </div>

          <h5> Select Blackfynn Dataset for uploading
            <div class="tooltipnew"><img class="info" src="assets/img/info.png">
              <span class="tooltiptext">Select the target dataset on your Blackfynn account (sorted alphabetically)</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bfdatasetlist">
              <option> Select dataset </option>
            </select>
          </div>

          <h5> </h5>
          <div class="demo-controls">
            <button id="button-refresh-dataset-list" class="demo-button"> Refresh list </button>
          </div>

          <div>
            <h5> Submit
              <div class="tooltipnew"><img class="info" src="assets/img/info.png">
                <span class="tooltiptext">
                Click on 'Submit dataset' to push all the files/folders from the selected local folder into the selected Blackfynn folder. Local folder structure will be preserved. The progress bar located below will provide a live update on the upload.
                </span>
              </div>
            </h5>
            <button id="button-submit-dataset" class="demo-button"> Submit dataset </button>
            <p id='para-progress-bar-error-status'> <p>
            <h5> Progress </h5>
            <progress class=progresstrack id=progress-bar-upload-bf max="100" value="0"></progress>
            <p id='para-progress-bar-status'> <p>
          </div>
        </div>
      </div>
    </div>


    <script type="text/javascript">
      require('./renderer-process/native-ui/dialogs/open-file')
      require('./renderer-process/native-ui/dialogs/save')
      require('./renderer-process/manage_submit/blackfynn_account')
    </script>

  </section>
</template>
