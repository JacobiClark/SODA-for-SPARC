<!DOCTYPE html>
<template class="task-template">
  <section id="manage_submit-section" class="section js-section u-category-windows">
    <header class="section-header">
      <div class="section-wrapper">
        <h1>
          Manage and Submit Datasets
        </h1>
        <h3>This interface will assist you in managing and submitting your datasets on Blackfynn. It will also guide you for annotating your datasets using the Blackfynn model properties.</h3>
      </div>
    </header>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-login-demo-toggle" class="js-container-target demo-toggle-button">Login to your Blackfynn account
          <div class="demo-meta u-avoid-clicks"> Easy login interface </div>
        </button>

        <div class="demo-box">
          <p> Please checkout the dedicated <a href="https://help.blackfynn.com/articles/1488536-creating-an-api-key-for-the-blackfynn-clients"> Blackfynn Help </a>
          for generating an API and setting up your Blackfynn account on your computer for the first time. </p>

          <form id = 'blackfynn-account'>
            <div style = "padding:10px 0px">
              <input id="addAccount" name="blackfynn-account" type="radio" class="with-style" />
              <label for="addAccount" class="labelradio"> Add new account </label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">Authenticate yourself by using API key and secret</span>
                </div>
            </div>
            <div>
              <input id="selectAccount" name="blackfynn-account" type="radio" class="with-style" />
              <label for="selectAccount" class="labelradio"> Select account </label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">Added account(s) will be displayed in this drop-down list. Click on 'Load existing account(s)' and select one from the drop-down list before continuing
                  </span>
                </div>
            </div>
          </form>

          <div id="div-add-account" class="datasetsaveoption">
            <h5> Add new account </h5>
            <div> <font color="black"> Api key name: </font> </div>
            <div class="demo-controls">
              <input id="bf-key-name" class="demo-response">
            </div>
            <div> <font color="black"> Api key: </font> </div>
            <div class="demo-controls">
              <input id="bf-key" class="demo-response">
            </div>
            <div> <font color="black"> Api secret: </font> </div>
            <div class="demo-controls">
              <input id="bf-secret" class="demo-response">
            </div>
            <h5> </h5>
            <div class="demo-controls">
              <button class="demo-button" id="add-bf-account"> Add account </button>
              <textarea class="demo-response" id="add-account-progress" readonly></textarea>
            </div>
          </div>

          <div id="div-select-account" class="datasetsaveoption"><br>
            <button id="button-check-bf-account-details" class="demo-button"> Load existing account(s) </button>
            <h5> Select account </h5>
            <div class="demo-controls">
              <select class="my_dropdown" id="bfaccountlist">
                <option> Select </option>
              </select>
            </div>
            <p id='para-select-account-status'> <p>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-create-demo-toggle" class="js-container-target demo-toggle-button"> Create new empty dataset
          <div class="demo-meta u-avoid-clicks"> Add an empty dataset on the selected Blackfynn account </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <h5> Enter name
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Enter the name of the Dataset you want to create</span>
            </div>
          </h5>
          <div class="demo-controls">
            <input id="bf-new-dataset-name" class="demo-response"> </input>
          </div>

          <h5> </h5>
          <div class="demo-controls">
            <button id="button-create-bf-new-dataset" class="demo-button"> Create </button>
            <textarea class="demo-response" id="add-new-dataset-progress" readonly></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-metadata-demo-toggle" class="js-container-target demo-toggle-button"> Add metadata to Blackfynn dataset
          <div class="demo-meta u-avoid-clicks"> Add a banner image to your dataset and/or a description
          </div>
        </button>
        <div class="demo-box">
          <p> Coming soon... tentative date: December 2019 </p>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-submit-demo-toggle" class="js-container-target demo-toggle-button"> Submit new dataset
          <div class="demo-meta u-avoid-clicks"> Upload a local dataset to your Blackfynn account </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <h5> Select local dataset to submit
          <div class="tooltipnew">( ? )
            <span class="tooltiptext">Select the local folder that you want to submit to your Blackfynn account</span>
          </div>
          </h5>
          <div class="demo-controls">
            <button id="button-select-submit-dataset" class="demo-button">Select Dataset Folder </button>
            <textarea class="demo-response" id="selected-submit-dataset"></textarea>
          </div>

          <h5> Select Blackfynn Dataset for uploading
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Select the target dataset on your Blackfynn account (sorted alphabetically)</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bfdatasetlist">
              <option> Select dataset </option>
            </select>
          </div>

          <h5> </h5>
          <div class="demo-controls">
            <button id="button-refresh-dataset-list" class="demo-button"> Refresh list </button>
          </div>

          <div>
            <h5> Submit
              <div class="tooltipnew">( ? )
                <span class="tooltiptext">
                Click on 'Submit dataset' to push all the files/folders from the selected local folder into the selected Blackfynn folder. Local folder structure will be preserved. The progress bar located below will provide a live update on the upload.
                </span>
              </div>
            </h5>
            <button id="button-submit-dataset" class="demo-button"> Submit dataset </button>
            <p id='para-progress-bar-error-status'> <p>
            <h5> Progress </h5>
            <div id='div-meter'><div id='div-progress-bar'></div> </div>
            <p id='para-progress-bar-status'> <p>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-permission-demo-toggle" class="js-container-target demo-toggle-button"> Manage dataset permission
          <div class="demo-meta u-avoid-clicks"> Give access to your dataset to other members of your organization for collaborating or to the Curation Team for review </div>
        </button>
        <div class="demo-box">
          <h5> Select Blackfynn Dataset
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Select the Blackfynn dataset you wish to see/edit permission (sorted alphabetically)</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bfdatasetlist_permission">
              <option> Select dataset </option>
            </select>
          </div>
          <h5> Current permission
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Name of user (First name, Last name) and their current permission ('viewer', 'manager', or 'editor') will be shown here for the selected dataset</span>
            </div>
          </h5>
          <div class="demo-controls">
            <p id = "para-dataset-permission-current"> </p>
          </div>

          <h5> Add/edit permission for a user
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Select name of user and the role you want to give for the selected dataset and click on 'Add permission for user'
              <br> <br>
              Note: SPARC curation rules require to have the PI of the SPARC award as the owner of a dataset before it is shared with the Curation Team
              <br><br>
              To remove a permission select name of user and 'remove current permission'</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bf_list_users">

              <option> Select user </option>
            </select>
          </div>

          <h5>  </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bf_list_roles">
              <option> Select role </option>
              <option> viewer </option>
              <option> manager </option>
              <option> editor </option>
              <option> owner </option>
              <option> remove current permission </option>
            </select>
          </div>

          <h5>  </h5>
          <div class="demo-controls">
            <button id="button-add-permission" class="demo-button"> Add permission for user </button>
            <p id = "para-dataset-permission-status"> </p>
          </div>

          <h5> Add/edit permission for a team
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">Select name of team and the role you want to give for the selected dataset and click on 'Add permission for team'
              <br> <br>
              Note: You need to give "manager" role to the SPARC Curation Team to share your dataset with the Curation Team for review
              <br><br>
              To remove a permission select name of team and 'remove current permission'</span>
            </div>
          </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bf_list_teams">
              <option> Select team </option>
            </select>
          </div>

          <h5>  </h5>
          <div class="demo-controls">
            <select class="my_dropdown" id="bf_list_roles_team">
              <option> Select role </option>
              <option> viewer </option>
              <option> manager </option>
              <option> editor </option>
              <option> remove current permission </option>
            </select>
          </div>

          <h5>  </h5>
          <div class="demo-controls">
            <button id="button-add-permission-team" class="demo-button"> Add permission for team </button>
            <p id = "para-dataset-permission-status-team"> </p>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-annotate-demo-toggle" class="js-container-target demo-toggle-button"> Annotate dataset
          <div class="demo-meta u-avoid-clicks"> Inform the model properties for your dataset </div>
        </button>
        <div class="demo-box">
          <p> </p>

          <p> Coming soon... Tentative date: April 2020</p>

        </div>
      </div>
    </div>

    <script type="text/javascript">
      require('./renderer-process/native-ui/dialogs/open-file')
      require('./renderer-process/native-ui/dialogs/save')
      require('./renderer-process/manage_submit/blackfynn_account')
    </script>

  </section>
</template>
